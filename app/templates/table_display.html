{% extends "header.html" %}

{% block body %}
<style>
div.dataTables_wrapper 
{
    width: 80%;
    margin: 0 auto;
}
h1
{
  font-size:28px;
}
</style>

<h1>Client Accounts</h1>
<table id="table" class="display" style="width:100%">

</table>

<script>
$( document ).ready( function( $ ) 
{
        var data,
        tableName= '#demotable',
        columns,
        str,
        jqxhr = $.ajax('/account_data/')
                .done(function () {
                    data = JSON.parse(jqxhr.responseText);
        // Iterate each column and print table headers for Datatables
        var tableHeaders="";
        $.each(data.columns, function(i, val){
        tableHeaders += "<th>" + val.name + "</th>";
        });     
  
        $("#table").empty();
        $("#table").append('<table id="table"  class="display"  width="100%"><thead><tr>' + tableHeaders + '</tr></thead></table>');

        var table=$('#table').DataTable({
            "data":data.data,
            "columns":data.columns,
            "scrollY": "60vh",
            "scrollX": true, 
            "scrollCollapse": true,
        });
    });
});

</script>


{% endblock %}